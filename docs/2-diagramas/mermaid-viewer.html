<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visor Diagramas Mermaid - Calculadora 3C PaÃ­s</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background-color: #f5f5f5; 
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            background: white; 
            padding: 20px; 
            border-radius: 8px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
        }
        h1 { 
            color: #333; 
            text-align: center; 
            margin-bottom: 30px; 
        }
        .diagram-section { 
            margin: 40px 0; 
            padding: 20px; 
            border-left: 4px solid #007acc; 
            background-color: #f9f9f9; 
        }
        .diagram-title { 
            font-size: 1.2em; 
            font-weight: bold; 
            color: #007acc; 
            margin-bottom: 15px; 
        }
        .mermaid { 
            text-align: center; 
            margin: 20px 0; 
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ Calculadora 3C PaÃ­s - Diagramas de Flujo</h1>
        
        <div class="diagram-section">
            <div class="diagram-title">ğŸ“Š Proceso Completo: RecopilaciÃ³n y AnÃ¡lisis de Datos</div>
            <div class="mermaid">
graph TD
    A[ğŸ­ Empresas Cementeras<br/>y Concreteras] 
    B[ğŸ›ï¸ FICEM<br/>FederaciÃ³n]
    C[ğŸ“Š Sistema 3C PaÃ­s<br/>Calculadora]
    D[ğŸŒ PaÃ­ses LATAM<br/>Indicadores Nacionales]

    A --> E[ğŸ“ Acceso a Formularios<br/>Ingreso de Datos]
    E --> F{Tipo de Planta}
    
    F -->|Cemento| G[ğŸ­ Formulario Cemento<br/>â€¢ Datos empresa<br/>â€¢ Datos planta<br/>â€¢ ProducciÃ³n clÃ­nker<br/>â€¢ ComposiciÃ³n cemento<br/>â€¢ Emisiones proceso]
    F -->|Concreto| H[ğŸš› Formulario Concreto<br/>â€¢ Datos empresa<br/>â€¢ Datos planta<br/>â€¢ Dosificaciones<br/>â€¢ Resistencias<br/>â€¢ Transporte]

    G --> I[ğŸ“Š GeneraciÃ³n Excel<br/>Plantilla validable]
    H --> I

    I --> J[âœ… ValidaciÃ³n Externa<br/>RevisiÃ³n tÃ©cnica]
    J --> K[ğŸ”„ Carga al Sistema<br/>Base de datos]

    K --> L[âš™ï¸ Motor de CÃ¡lculos]
    L --> M[ğŸ§® CÃ¡lculo Huellas CO2<br/>â€¢ Cemento: Factor emisiÃ³n<br/>â€¢ Concreto: Huella total]
    M --> N[ğŸ“ˆ ClasificaciÃ³n GCCA<br/>â€¢ Bandas cemento A-G<br/>â€¢ Bandas concreto AA-F]

    N --> O[ğŸŒ AgregaciÃ³n Nacional<br/>ConsolidaciÃ³n datos]
    O --> P[ğŸ“Š Indicadores PaÃ­s<br/>â€¢ CO2/ClÃ­nker<br/>â€¢ CO2/Cemento<br/>â€¢ CO2/Concreto<br/>â€¢ CO2/Resistencia]

    P --> Q[ğŸ¯ Dashboard Nacional<br/>Visualizaciones]
    P --> R[ğŸ“‹ Reportes FICEM<br/>Comparativos regionales]
    P --> S[ğŸŒ Benchmarking<br/>Internacional]

    R --> B
    B --> U[ğŸ“¢ PolÃ­ticas y<br/>Mejores PrÃ¡cticas]
    U --> A

    classDef empresa fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    classDef sistema fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef proceso fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef output fill:#fff3e0,stroke:#f57c00,stroke-width:2px

    class A,E,F,G,H empresa
    class C,I,J,L,M,N,O,P sistema
    class K,U proceso
    class Q,R,S,T,D output
            </div>
        </div>

        <div class="diagram-section">
            <div class="diagram-title">ğŸ”„ Flujo de Datos Temporal</div>
            <div class="mermaid">
sequenceDiagram
    participant E as ğŸ­ Empresa
    participant S as ğŸ“Š Sistema 3C
    participant V as âœ… Validador
    participant F as ğŸ›ï¸ FICEM
    participant P as ğŸŒ PaÃ­s

    Note over E,P: Fase 1: Ingreso de Datos
    E->>S: Accede a formularios
    S->>E: Presenta formulario especÃ­fico
    E->>S: Completa datos operacionales
    S->>E: Genera archivo Excel
    
    Note over E,P: Fase 2: ValidaciÃ³n
    E->>V: EnvÃ­a archivo Excel
    V->>V: Revisa consistencia datos
    V->>E: Retroalimenta correcciones
    E->>S: Carga archivo validado

    Note over E,P: Fase 3: Procesamiento
    S->>S: Calcula huellas CO2
    S->>S: Aplica clasificaciÃ³n GCCA
    S->>S: Agrega datos por paÃ­s
    
    Note over E,P: Fase 4: Resultados
    S->>F: Genera indicadores regionales
    S->>P: Publica dashboard nacional
    F->>E: Comparte benchmarks
    E->>S: Mejora datos siguiente ciclo
            </div>
        </div>

        <div class="diagram-section">
            <div class="diagram-title">ğŸ—ï¸ Arquitectura de Datos</div>
            <div class="mermaid">
erDiagram
    EMPRESA ||--o{ PLANTA-CEMENTO : opera
    EMPRESA ||--o{ PLANTA-CONCRETO : opera
    
    EMPRESA {
        string nombre
        string pais
        string responsable
        string contacto
    }
    
    PLANTA-CEMENTO {
        string id_planta
        float capacidad_clinker
        float produccion_anual
        float factor_co2
        string tipo_cemento
    }
    
    PLANTA-CONCRETO {
        string id_planta
        float capacidad_m3
        float resistencia_promedio
        float contenido_cemento
        float huella_co2
    }
    
    PLANTA-CEMENTO ||--o{ CALCULO-CEMENTO : genera
    PLANTA-CONCRETO ||--o{ CALCULO-CONCRETO : genera
    
    CALCULO-CEMENTO {
        float emisiones_proceso
        float emisiones_energia
        string banda_gcca
        date fecha_calculo
    }
    
    CALCULO-CONCRETO {
        float huella_materiales
        float huella_transporte
        string banda_gcca
        date fecha_calculo
    }
    
    CALCULO-CEMENTO ||--o{ INDICADOR-PAIS : agrega
    CALCULO-CONCRETO ||--o{ INDICADOR-PAIS : agrega
    
    INDICADOR-PAIS {
        string pais
        float co2_clinker_promedio
        float co2_cemento_promedio
        float co2_concreto_promedio
        float indice_eficiencia
        date periodo
    }
            </div>
        </div>

        <div class="diagram-section">
            <div class="diagram-title">ğŸ­ Casos de Uso Principales</div>
            <div class="mermaid">
graph LR
    EM[ğŸ­ Empresa]
    FI[ğŸ›ï¸ FICEM]
    GOB[ğŸ›ï¸ Gobierno]
    
    SYS[ğŸ“Š Sistema 3C PaÃ­s]
    
    EM --> UC1[Registrar datos<br/>operacionales]
    UC1 --> SYS
    
    SYS --> UC2[Generar reporte<br/>huella carbono]
    UC2 --> EM
    
    SYS --> UC3[Comparar con<br/>benchmarks]
    UC3 --> EM
    
    FI --> UC4[Consolidar datos<br/>regionales]
    UC4 --> SYS
    
    SYS --> UC5[Generar indicadores<br/>comparativos]
    UC5 --> FI
    
    SYS --> UC6[Identificar mejores<br/>prÃ¡cticas]
    UC6 --> FI
    
    SYS --> UC7[Consultar indicadores<br/>nacionales]
    UC7 --> GOB
    
    SYS --> UC8[Proveer datos para<br/>polÃ­ticas ambientales]
    UC8 --> GOB
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
    </script>
</body>
</html>